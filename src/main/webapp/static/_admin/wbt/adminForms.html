<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Warburtons Admin Forms</title>
        <link type="text/css" href="/css/blitzer/jquery-ui-1.8.17.custom.css" rel="stylesheet" />	
    </head>
    <body>
        <div id="header" class="ui-widget">
        </div>

        <div id="contents" class="ui-widget">
            <div><a href="/wbt/userServiceForms.html">User Service forms</a></div>
            <div><a href="/wbt/forms.html">Warburtons forms</a></div>

            <h1>Warburtons Admin Forms</h1>

            <hr/>
            
            <h3>Merge Profiles</h3>
            
            <form id="mergeProfilesForm" enctype="multipart/form-data" action="#" method="POST">
                <table id="mergeProfiles" class="ui-widget ui-widget-content">
                    <thead class="ui-widget-header">
                        <tr>
                            <th>POST</th>
                            <th>profile/merge</th>
                        </tr>
                    </thead>
                    <tbody id="mergeProfilesBody">
                        <tr>
                            <td><label for="profilesCsvFile">profiles.csv</label></td>
                            <td><input type="file" id="profilesCsvFile" name="profilesCsvFile" accept="text/csv"/></td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr>
                            <td></td>
                            <td><input type="submit" value="Merge Profiles" /></td>
                        </tr>
                    </tfoot>
                </table>
            </form>
            
            <p/>

            <table id="mergeProfilesGet" class="ui-widget ui-widget-content">
                <thead class="ui-widget-header">
                    <tr>
                        <th>GET</th>
                        <th>task/mergeProfiles?blobName=profiles.csv</th>
                    </tr>
                </thead>
                <tbody id="mergeProfilesBody">
                    <tr>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td><label for="profilesCsv">Latest Profiles CSV file</label></td>
                        <td><a id="profilesCsv" href="task/mergeProfiles?blobName=profiles.csv">Merge Latest</a></td>
                    </tr>
                </tfoot>
            </table>

            <hr/>
            
            <h3>Merge Locations</h3>
            
            <form id="mergeLocationsForm" enctype="multipart/form-data" action="#" method="POST">
                <table id="mergeLocations" class="ui-widget ui-widget-content">
                    <thead class="ui-widget-header">
                        <tr>
                            <th>POST</th>
                            <th>location/merge</th>
                        </tr>
                    </thead>
                    <tbody id="mergeLocationsBody">
                        <tr>
                            <td><label for="locationsCsvFile">locations.csv</label></td>
                            <td><input type="file" id="locationsCsvFile" name="locationsCsvFile" accept="text/csv"/></td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr>
                            <td></td>
                            <td><input type="submit" value="Merge Locations" /></td>
                        </tr>
                    </tfoot>
                </table>
            </form>
            
            <p/>

            <table id="mergeLocationsGet" class="ui-widget ui-widget-content">
                <thead class="ui-widget-header">
                    <tr>
                        <th>GET</th>
                        <th>task/mergeLocations?blobName=locations.csv</th>
                    </tr>
                </thead>
                <tbody id="mergeLocationsBody">
                    <tr>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td><label for="locationsCsv">Latest Profiles CSV file</label></td>
                        <td><a id="locationsCsv" href="task/mergeLocations?blobName=locations.csv">Merge Latest</a></td>
                    </tr>
                </tfoot>
            </table>

            <hr/>

            <h3>Merge Products</h3>
            <form id="mergeProductsForm" enctype="multipart/form-data" action="#" method="POST">
                <table id="mergeProducts" class="ui-widget ui-widget-content">
                    <thead class="ui-widget-header">
                        <tr>
                            <th>POST</th>
                            <th>product/merge</th>
                        </tr>
                    </thead>
                    <tbody id="mergeProductsBody">
                        <tr>
                            <td><label for="productsCsvFile">profiles.csv</label></td>
                            <td><input type="file" id="productsCsvFile" name="productsCsvFile" accept="text/csv"/></td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr>
                            <td></td>
                            <td><input type="submit" value="Merge Products" /></td>
                        </tr>
                    </tfoot>
                </table>
            </form>

            <p/>

            <table id="mergeProductsGet" class="ui-widget ui-widget-content">
                <thead class="ui-widget-header">
                    <tr>
                        <th>GET</th>
                        <th>task/mergeProducts?blobName=products.csv</th>
                    </tr>
                </thead>
                <tbody id="mergeProductsBody">
                    <tr>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td><label for="productsCsv">Latest Profiles CSV file</label></td>
                        <td><a id="productsCsv" href="task/mergeProducts?blobName=products.csv">Merge Latest</a></td>
                    </tr>
                </tfoot>
            </table>

        </div>

        <div id="footer" class="ui-widget"></div>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.19/jquery-ui.min.js"></script>
        <script type="text/javascript">
            $.ajaxSetup( {
                cache: false,
                data: null
            });

            $(function() {
                getMergeLocationsUploadUrl();
                getMergeProfilesUploadUrl();
                getMergeProductsUploadUrl();
            });

            function getMergeLocationsUploadUrl() {
                $.ajax({
                    type: "GET",
                    url: "blob/v10",
                    data: {
                        callbackPath: "/api/_admin/wbt/location/merge"
                    },
                    dataType: "jsonp",
                    crossDomain: true,
                    success: function(data, textStatus, jqXHR) {
                        $("#mergeLocationsForm").attr("action", data.uploadUrl);
                    }
                });
            }
            function getMergeProfilesUploadUrl() {
                $.ajax({
                    type: "GET",
                    url: "blob/v10",
                    data: {
                        callbackPath: "/api/_admin/wbt/profile/merge"
                    },
                    dataType: "jsonp",
                    crossDomain: true,
                    success: function(data, textStatus, jqXHR) {
                        $("#mergeProfilesForm").attr("action", data.uploadUrl);
                    }
                });
            }
            function getMergeProductsUploadUrl() {
                $.ajax({
                    type: "GET",
                    url: "blob/v10",
                    data: {
                        callbackPath: "/api/_admin/wbt/product/merge"
                    },
                    dataType: "jsonp",
                    crossDomain: true,
                    success: function(data, textStatus, jqXHR) {
                        $("#mergeProductsForm").attr("action", data.uploadUrl);
                    }
                });
            }
        </script>

    </body>
</html>